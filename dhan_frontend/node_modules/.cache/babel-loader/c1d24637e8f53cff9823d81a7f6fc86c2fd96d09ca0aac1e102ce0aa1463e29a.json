{"ast":null,"code":"var _jsxFileName = \"/home/hp/Documents/Dhan_Trading_Bot/dhan_frontend/src/components/PnlReport.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { io } from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io(\"http://127.0.0.1:5000\", {\n  transports: [\"websocket\"],\n  reconnectionAttempts: 5,\n  reconnectionDelay: 2000\n});\nconst PnlReport = () => {\n  _s();\n  const [pnlData, setPnlData] = useState([]);\n  const [livePrices, setLivePrices] = useState({}); // ✅ Store live prices separately\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const fetchInitialData = async () => {\n    try {\n      const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log(\"✅ Initial API Data:\", data);\n      if (data.status === \"success\") {\n        setPnlData(data.orders || []);\n        setLivePrices(data.live_prices || {}); // ✅ Store live prices separately\n      } else {\n        throw new Error(\"Invalid API response structure.\");\n      }\n    } catch (err) {\n      console.error(\"Error fetching initial data:\", err);\n      setError(\"Failed to fetch initial data.\");\n    }\n    setLoading(false);\n  };\n  useEffect(() => {\n    fetchInitialData();\n    const handlePnLUpdate = data => {\n      console.log(\"🔄 Received WebSocket Update:\", data);\n      if (data.status === \"success\") {\n        setPnlData(data.pnl_report || []);\n        setLivePrices(data.live_prices || {}); // ✅ Update live prices from WebSocket\n      } else {\n        setError(\"Invalid WebSocket data.\");\n      }\n    };\n    socket.on(\"pnl_update\", handlePnLUpdate);\n    socket.on(\"connect\", () => console.log(\"✅ WebSocket connected!\"));\n    socket.on(\"disconnect\", () => console.log(\"❌ WebSocket disconnected!\"));\n    socket.on(\"connect_error\", err => {\n      console.error(\"WebSocket connection error:\", err.message || err);\n      setError(\"WebSocket connection failed.\");\n    });\n    return () => {\n      socket.off(\"pnl_update\", handlePnLUpdate);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: \"\\uD83D\\uDCCA Live PnL Report\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-300\",\n      children: \"Fetching data...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }, this) : error ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500 font-semibold\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-5xl bg-gray-800 shadow-md rounded-lg overflow-hidden\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"w-full text-sm text-gray-300\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-blue-600 text-white uppercase text-xs\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2\",\n                children: \"Order ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2\",\n                children: \"Security ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2\",\n                children: \"Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2\",\n                children: \"Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2\",\n                children: \"Entry Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2\",\n                children: \"Latest Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 37\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2\",\n                children: \"PnL\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2\",\n                children: \"PnL %\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"divide-y divide-gray-700\",\n            children: pnlData.length === 0 ? /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"8\",\n                className: \"p-4 text-center text-gray-500\",\n                children: \"No orders available.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 37\n            }, this) : pnlData.map(order => {\n              var _order$pnl, _order$pnl_percentage;\n              const currentPrice = livePrices[order.security_id] || \"N/A\"; // ✅ Fetch correct live price\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"hover:bg-gray-700\",\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2\",\n                  children: order.order_id || \"N/A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2\",\n                  children: order.security_id || \"N/A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2\",\n                  children: order.transaction_type || \"N/A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2\",\n                  children: order.quantity || \"N/A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2\",\n                  children: order.price || \"N/A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 font-semibold\",\n                  children: currentPrice\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 49\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: `px-4 py-2 font-bold text-lg ${order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"}`,\n                  children: ((_order$pnl = order.pnl) === null || _order$pnl === void 0 ? void 0 : _order$pnl.toFixed(2)) || \"N/A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 font-semibold\",\n                  children: [((_order$pnl_percentage = order.pnl_percentage) === null || _order$pnl_percentage === void 0 ? void 0 : _order$pnl_percentage.toFixed(2)) || \"N/A\", \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 49\n                }, this)]\n              }, order.order_id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 45\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n};\n_s(PnlReport, \"MbSpD/bBoC0/jr2nn1rc0JjJGEc=\");\n_c = PnlReport;\nexport default PnlReport;\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// // ✅ Fix: Force WebSocket transport\n// const socket = io(\"http://127.0.0.1:5000\", {\n//     transports: [\"websocket\"],  // ✅ Use WebSockets only\n//     reconnectionAttempts: 5,    // Retry up to 5 times\n//     reconnectionDelay: 2000,    // Wait 2 seconds between attempts\n// });\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // Fetch initial data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//             console.log(\"📡 Fetching initial data...\");  // ✅ Logging API call\n//             if (!response.ok) {\n//                 throw new Error(`HTTP error! Status: ${response.status}`);\n//             }\n//             const data = await response.json();\n//             console.log(\"✅ Initial API Data:\", data);  // ✅ Print API response in console\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders); // Initial data from API\n//             } else {\n//                 throw new Error(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             console.error(\"Error fetching initial data:\", err);\n//             setError(\"Failed to fetch initial data. Check the console for details.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData(); // Fetch initial orders from Flask\n\n//         // WebSocket event listeners\n//         const handlePnLUpdate = (data) => {\n//             console.log(\"🔄 Received WebSocket Update:\", data);  // ✅ Print WebSocket data\n//             console.log(\"Received PnL update:\", data);\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report); // Update live data\n//             } else {\n//                 console.error(\"Invalid WebSocket data:\", data);\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         };\n\n//         const handleConnect = () => console.log(\"✅ WebSocket connected!\");\n//         const handleDisconnect = () => console.log(\"❌ WebSocket disconnected!\");\n//         const handleError = (err) => {\n//             console.error(\"WebSocket connection error:\", err.message || err);\n//             setError(\"WebSocket connection failed. Check the console for details.\");\n//         };\n\n//         // Register WebSocket listeners\n//         socket.on(\"pnl_update\", handlePnLUpdate);\n//         socket.on(\"connect\", handleConnect);\n//         socket.on(\"disconnect\", handleDisconnect);\n//         socket.on(\"connect_error\", handleError);\n\n//         return () => {\n//             // Cleanup WebSocket listeners\n//             socket.off(\"pnl_update\", handlePnLUpdate);\n//             socket.off(\"connect\", handleConnect);\n//             socket.off(\"disconnect\", handleDisconnect);\n//             socket.off(\"connect_error\", handleError);\n//         };\n//     }, []);\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-500 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-5xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"8\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.price || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.live_prices || \"N/A\"}</td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage?.toFixed(2) || \"N/A\"}%\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// const socket = io(\"http://127.0.0.1:5000\"); // Connect WebSocket to Flask backend\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // Fetch initial data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//             const data = await response.json();\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders); // Initial data from API\n//             } else {\n//                 setError(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             setError(\"API request failed.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData(); // Fetch initial orders from Flask\n\n//         // Listen for live PnL updates from WebSocket\n//         socket.on(\"pnl_update\", (data) => {\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report); // Update live data\n//             } else {\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         });\n\n//         socket.on(\"connect_error\", (err) => {\n//             console.error(\"Socket connection error:\", err);\n//             setError(\"WebSocket connection failed.\");\n//         });\n\n//         return () => {\n//             socket.off(\"pnl_update\");\n//             socket.off(\"connect_error\");\n//         };\n//     }, []);\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-500 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-5xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"8\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.entry_price !== undefined ? order.price : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.current_price !== undefined ? order.current_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl !== undefined ? order.pnl.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage !== undefined ? order.pnl_percentage.toFixed(2) : \"N/A\"}%\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// // ✅ Fix: Force WebSocket transport\n// const socket = io(\"http://127.0.0.1:5000\", {\n//     transports: [\"websocket\"],  // ✅ Use WebSockets only\n//     reconnectionAttempts: 5,    // Retry up to 5 times\n//     reconnectionDelay: 2000,    // Wait 2 seconds between attempts\n// });\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // Fetch initial data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//             if (!response.ok) {\n//                 throw new Error(`HTTP error! Status: ${response.status}`);\n//             }\n//             const data = await response.json();\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders); // Initial data from API\n//             } else {\n//                 throw new Error(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             console.error(\"Error fetching initial data:\", err);\n//             setError(\"Failed to fetch initial data. Check the console for details.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData(); // Fetch initial orders from Flask\n\n//         // WebSocket event listeners\n//         const handlePnLUpdate = (data) => {\n//             console.log(\"Received PnL update:\", data);\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report); // Update live data\n//             } else {\n//                 console.error(\"Invalid WebSocket data:\", data);\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         };\n\n//         const handleConnect = () => console.log(\"✅ WebSocket connected!\");\n//         const handleDisconnect = () => console.log(\"❌ WebSocket disconnected!\");\n//         const handleError = (err) => {\n//             console.error(\"WebSocket connection error:\", err.message || err);\n//             setError(\"WebSocket connection failed. Check the console for details.\");\n//         };\n\n//         // Register WebSocket listeners\n//         socket.on(\"pnl_update\", handlePnLUpdate);\n//         socket.on(\"connect\", handleConnect);\n//         socket.on(\"disconnect\", handleDisconnect);\n//         socket.on(\"connect_error\", handleError);\n\n//         return () => {\n//             // Cleanup WebSocket listeners\n//             socket.off(\"pnl_update\", handlePnLUpdate);\n//             socket.off(\"connect\", handleConnect);\n//             socket.off(\"disconnect\", handleDisconnect);\n//             socket.off(\"connect_error\", handleError);\n//         };\n//     }, []);\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-500 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-5xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"8\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.price || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.current_price || \"N/A\"}</td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage?.toFixed(2) || \"N/A\"}%\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// // ✅ WebSocket Setup\n// const socket = io(\"http://127.0.0.1:5000\", {\n//     transports: [\"websocket\"],  // ✅ Use WebSockets only\n//     reconnectionAttempts: 5,    // Retry up to 5 times\n//     reconnectionDelay: 2000,    // Wait 2 seconds between attempts\n// });\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [totalPnl, setTotalPnl] = useState(0);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // ✅ Fetch Initial Data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(\"http://127.0.0.1:5000/pnl-report\");\n//             if (!response.ok) {\n//                 throw new Error(`HTTP error! Status: ${response.status}`);\n//             }\n//             const data = await response.json();\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders); // Set initial orders data\n//             } else {\n//                 throw new Error(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             console.error(\"Error fetching initial data:\", err);\n//             setError(\"Failed to fetch initial data. Check the console.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData(); // Fetch initial orders from Flask API\n\n//         // ✅ WebSocket Event Listeners\n//         const handlePnLUpdate = (data) => {\n//             console.log(\"📊 Received PnL update:\", data);\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report); // Update PnL data\n//                 setTotalPnl(data.total_pnl); // Update Total PnL\n//             } else {\n//                 console.error(\"Invalid WebSocket data:\", data);\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         };\n\n//         const handleConnect = () => console.log(\"✅ WebSocket connected!\");\n//         const handleDisconnect = () => console.log(\"❌ WebSocket disconnected!\");\n//         const handleError = (err) => {\n//             console.error(\"WebSocket error:\", err.message || err);\n//             setError(\"WebSocket connection failed. Check the console.\");\n//         };\n\n//         // Register WebSocket Listeners\n//         socket.on(\"pnl_update\", handlePnLUpdate);\n//         socket.on(\"connect\", handleConnect);\n//         socket.on(\"disconnect\", handleDisconnect);\n//         socket.on(\"connect_error\", handleError);\n\n//         return () => {\n//             // Cleanup WebSocket Listeners\n//             socket.off(\"pnl_update\", handlePnLUpdate);\n//             socket.off(\"connect\", handleConnect);\n//             socket.off(\"disconnect\", handleDisconnect);\n//             socket.off(\"connect_error\", handleError);\n//         };\n//     }, []);\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n\n//             {/* ✅ Show Errors & Loading State */}\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-500 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-5xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"8\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.entry_price?.toFixed(2) || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.current_price?.toFixed(2) || \"N/A\"}</td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage?.toFixed(2) || \"N/A\"}%\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n\n//             {/* ✅ Total PnL Summary */}\n//             {!loading && !error && (\n//                 <div className=\"mt-4 p-4 bg-gray-800 rounded-lg shadow-md w-full max-w-5xl\">\n//                     <h3 className=\"text-xl font-bold\">\n//                         Total PnL:{\" \"}\n//                         <span className={totalPnl >= 0 ? \"text-green-400\" : \"text-red-400\"}>\n//                             {totalPnl.toFixed(2)} INR\n//                         </span>\n//                     </h3>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// const API_URL = \"http://127.0.0.1:5000\";\n// const socket = io(API_URL, {\n//     transports: [\"websocket\"],\n//     reconnectionAttempts: 5,\n//     reconnectionDelay: 2000,\n// });\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [totalPnl, setTotalPnl] = useState(0);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // Fetch Initial PnL Data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(`${API_URL}/pnl-report`);\n//             if (!response.ok) {\n//                 throw new Error(`HTTP error! Status: ${response.status}`);\n//             }\n//             const data = await response.json();\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders);\n//                 setTotalPnl(data.total_pnl || 0);\n//             } else {\n//                 throw new Error(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             console.error(\"Error fetching initial data:\", err);\n//             setError(\"Failed to fetch initial data. Check the console.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData();\n\n//         socket.on(\"pnl_update\", (data) => {\n//             console.log(\"📊 Received PnL update:\", data);\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report);\n//                 setTotalPnl(data.total_pnl);\n//             } else {\n//                 console.error(\"Invalid WebSocket data:\", data);\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         });\n\n//         socket.on(\"connect\", () => console.log(\"✅ WebSocket connected!\"));\n//         socket.on(\"disconnect\", () => console.log(\"❌ WebSocket disconnected!\"));\n//         socket.on(\"connect_error\", (err) => {\n//             console.error(\"WebSocket error:\", err.message || err);\n//             setError(\"WebSocket connection failed. Check the console.\");\n//         });\n\n//         return () => {\n//             socket.off(\"pnl_update\");\n//             socket.off(\"connect\");\n//             socket.off(\"disconnect\");\n//             socket.off(\"connect_error\");\n//         };\n//     }, []);\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-500 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-5xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"8\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.price || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.current_price?.toFixed(2) || \"N/A\"}</td>\n//                                             <td className={`px-4 py-2 font-bold text-lg ${order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"}`}>\n//                                                 {order.pnl?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage?.toFixed(2) || \"N/A\"}%\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n\n//             {!loading && !error && (\n//                 <div className=\"mt-4 p-4 bg-gray-800 rounded-lg shadow-md w-full max-w-5xl\">\n//                     <h3 className=\"text-xl font-bold\">\n//                         Total PnL: <span className={totalPnl >= 0 ? \"text-green-400\" : \"text-red-400\"}>{totalPnl.toFixed(2)} INR</span>\n//                     </h3>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// const socket = io(\"http://127.0.0.1:5000\"); // Connect WebSocket to Flask backend\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // Fetch initial data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//             if (!response.ok) {\n//                 throw new Error(`HTTP error! Status: ${response.status}`);\n//             }\n//             const data = await response.json();\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders); // Initial data from API\n//             } else {\n//                 throw new Error(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             console.error(\"Error fetching initial data:\", err);\n//             setError(\"Failed to fetch initial data. Check the console for details.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData(); // Fetch initial orders from Flask\n\n//         // Listen for live PnL updates from WebSocket\n//         socket.on(\"pnl_update\", (data) => {\n//             console.log(\"Received PnL update:\", data);\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report); // Update live data\n//             } else {\n//                 console.error(\"Invalid WebSocket data:\", data);\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         });\n\n//         socket.on(\"connect\", () => {\n//             console.log(\"WebSocket connected!\");\n//         });\n\n//         socket.on(\"disconnect\", () => {\n//             console.log(\"WebSocket disconnected!\");\n//         });\n\n//         socket.on(\"connect_error\", (err) => {\n//             console.error(\"Socket connection error:\", err.message || err);\n//             setError(\"WebSocket connection failed. Check the console for details.\");\n//         });\n\n//         return () => {\n//             socket.off(\"pnl_update\");\n//             socket.off(\"connect_error\");\n//         };\n//     }, []);\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-500 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-5xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"8\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.price || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.last_price || \"N/A\"}</td>\n\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.entry_price?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.current_price?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage?.toFixed(2) || \"N/A\"}%\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// const socket = io(process.env.REACT_APP_SOCKET_URL || \"http://127.0.0.1:5000\"); // Connect WebSocket to Flask backend\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // Fetch initial data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//             if (!response.ok) {\n//                 throw new Error(`HTTP error! Status: ${response.status}`);\n//             }\n//             const data = await response.json();\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders); // Initial data from API\n//             } else {\n//                 throw new Error(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             console.error(\"Error fetching initial data:\", err);\n//             setError(\"Failed to fetch initial data. Check the console for details.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData(); // Fetch initial orders from Flask\n\n//         // Listen for live PnL updates from WebSocket\n//         socket.on(\"pnl_update\", (data) => {\n//             console.log(\"Received PnL update:\", data);\n//             if (data?.status === \"success\" && Array.isArray(data?.pnl_report)) {\n//                 setPnlData(data.pnl_report); // Update live data\n//             } else {\n//                 console.error(\"Invalid WebSocket data:\", data);\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         });\n\n//         socket.on(\"connect\", () => {\n//             console.log(\"WebSocket connected!\");\n//         });\n\n//         socket.on(\"disconnect\", () => {\n//             console.log(\"WebSocket disconnected!\");\n//         });\n\n//         socket.on(\"reconnect\", (attempt) => {\n//             console.log(`WebSocket reconnected after ${attempt} attempts`);\n//         });\n\n//         socket.on(\"connect_error\", (err) => {\n//             console.error(\"Socket connection error:\", err.message || err);\n//             setError(\"WebSocket connection failed. Check the console for details.\");\n//         });\n\n//         socket.on(\"reconnect_failed\", () => {\n//             console.error(\"WebSocket reconnection failed\");\n//             setError(\"WebSocket reconnection failed. Please refresh the page.\");\n//         });\n\n//         return () => {\n//             socket.off(\"pnl_update\");\n//             socket.off(\"connect_error\");\n//             socket.off(\"connect\");\n//             socket.off(\"disconnect\");\n//             socket.off(\"reconnect\");\n//             socket.off(\"reconnect_failed\");\n//         };\n//     }, []);\n\n//     const totalEntryPrice = pnlData.reduce((sum, order) => sum + (order.entry_price || 0), 0);\n//     const totalLatestPrice = pnlData.reduce((sum, order) => sum + (order.current_price || 0), 0);\n//     const totalProfit = pnlData.filter(order => order.pnl > 0).reduce((sum, order) => sum + (order.pnl || 0), 0);\n//     const totalLoss = pnlData.filter(order => order.pnl < 0).reduce((sum, order) => sum + Math.abs(order.pnl || 0), 0);\n//     const netPnl = totalProfit - totalLoss;\n//     const pnlPercentage = totalEntryPrice > 0 ? ((netPnl / totalEntryPrice) * 100).toFixed(2) : \"0.00\";\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <div className=\"flex justify-center items-center\">\n//                     <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-white\"></div>\n//                 </div>\n//             ) : error ? (\n//                 <div>\n//                     <p className=\"text-red-500 font-semibold\">{error}</p>\n//                     <button\n//                         onClick={fetchInitialData}\n//                         className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n//                     >\n//                         Retry\n//                     </button>\n//                 </div>\n//             ) : (\n//                 <div className=\"w-full max-w-5xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"8\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.entry_price?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.current_price?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage?.toFixed(2) || \"N/A\"}%\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                             <tfoot className=\"bg-gray-700 text-white font-bold\">\n//                                 <tr className=\"border-t border-gray-600\">\n//                                     <td className=\"px-12 py-3 text-right\" colSpan=\"4\">Total:</td>\n//                                     <td className=\"px-4 py-3\">{totalEntryPrice.toFixed(2)}</td>\n//                                     <td className=\"px-4 py-3\">{totalLatestPrice.toFixed(2)}</td>\n//                                     <td className={`px-4 py-3 ${netPnl >= 0 ? \"text-green-400\" : \"text-red-400\"}`}>{netPnl.toFixed(2)}</td>\n//                                     <td className=\"px-4 py-3\">{pnlPercentage}%</td>\n//                                     <td className=\"px-4 py-3\">{netPnl >= 0 ? \"Profit\" : \"Loss\"}</td>\n//                                 </tr>\n//                             </tfoot>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// const socket = io(\"http://127.0.0.1:5000\"); // Connect WebSocket to Flask backend\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // Fetch initial data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//             const data = await response.json();\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders); // Set API data\n//             } else {\n//                 setError(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             setError(\"API request failed.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData();\n\n//         // Listen for live PnL updates from WebSocket\n//         socket.on(\"pnl_update\", (data) => {\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report);\n//             } else {\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         });\n\n//         socket.on(\"connect_error\", (err) => {\n//             console.error(\"Socket connection error:\", err);\n//             setError(\"WebSocket connection failed.\");\n//         });\n\n//         return () => {\n//             socket.off(\"pnl_update\");\n//             socket.off(\"connect_error\");\n//         };\n//     }, []);\n\n//     // Calculate total profit, total loss, and net PnL\n//     const totalProfit = pnlData\n//         .filter(order => order.pnl > 0)\n//         .reduce((sum, order) => sum + (order.pnl || 0), 0)\n//         .toFixed(2);\n\n//     const totalLoss = pnlData\n//         .filter(order => order.pnl < 0)\n//         .reduce((sum, order) => sum + Math.abs(order.pnl || 0), 0)\n//         .toFixed(2);\n\n//     const netPnl = (totalProfit - totalLoss).toFixed(2);\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-500 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-6xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                     <th className=\"px-4 py-2\">Status</th> {/* New Column */}\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"9\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.entry_price !== undefined ? order.entry_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.current_price !== undefined ? order.current_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl !== undefined ? order.pnl.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage !== undefined ? order.pnl_percentage.toFixed(2) : \"N/A\"}%\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold ${\n//                                                     order.pnl >= 0 ? \"text-green-400\" : \"text-red-400\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl >= 0 ? \"Profit\" : \"Loss\"}\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                             {/* Footer Row for Total Profit & Loss */}\n//                             <tfoot className=\"bg-gray-900 text-white text-lg font-bold\">\n//                                 <tr>\n//                                     <td colSpan=\"6\" className=\"px-4 py-3 text-right\">Total Profit:</td>\n//                                     <td className=\"px-4 py-3 text-green-500\">{totalProfit}</td>\n//                                     <td className=\"px-4 py-3\"></td>\n//                                     <td className=\"px-4 py-3\"></td>\n//                                 </tr>\n//                                 <tr>\n//                                     <td colSpan=\"6\" className=\"px-4 py-3 text-right\">Total Loss:</td>\n//                                     <td className=\"px-4 py-3 text-red-500\">-{totalLoss}</td>\n//                                     <td className=\"px-4 py-3\"></td>\n//                                     <td className=\"px-4 py-3\"></td>\n//                                 </tr>\n//                                 <tr>\n//                                     <td colSpan=\"6\" className=\"px-4 py-3 text-right\">Net PnL:</td>\n//                                     <td\n//                                         className={`px-4 py-3 font-bold ${\n//                                             netPnl >= 0 ? \"text-green-400\" : \"text-red-400\"\n//                                         }`}\n//                                     >\n//                                         {netPnl}\n//                                     </td>\n//                                     <td className=\"px-4 py-3\"></td>\n//                                     <td className=\"px-4 py-3\"></td>\n//                                 </tr>\n//                             </tfoot>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// const socket = io(\"http://127.0.0.1:5000\"); // Connect WebSocket to Flask backend\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // Fetch initial data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//             const data = await response.json();\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders); // Set API data\n//             } else {\n//                 setError(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             setError(\"API request failed.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData();\n\n//         // Listen for live PnL updates from WebSocket\n//         socket.on(\"pnl_update\", (data) => {\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report);\n//             } else {\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         });\n\n//         socket.on(\"connect_error\", (err) => {\n//             console.error(\"Socket connection error:\", err);\n//             setError(\"WebSocket connection failed.\");\n//         });\n\n//         return () => {\n//             socket.off(\"pnl_update\");\n//             socket.off(\"connect_error\");\n//         };\n//     }, []);\n\n//     // Calculate totals for table columns\n//     // const totalQuantity = pnlData.reduce((sum, order) => sum + (order.quantity || 0), 0);\n//     const totalEntryPrice = pnlData.reduce((sum, order) => sum + (order.entry_price || 0), 0);\n//     const totalLatestPrice = pnlData.reduce((sum, order) => sum + (order.current_price || 0), 0);\n//     const totalProfit = pnlData.filter(order => order.pnl > 0).reduce((sum, order) => sum + (order.pnl || 0), 0);\n//     const totalLoss = pnlData.filter(order => order.pnl < 0).reduce((sum, order) => sum + Math.abs(order.pnl || 0), 0);\n//     const netPnl = totalProfit - totalLoss;\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-300 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-6xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                     <th className=\"px-4 py-2\">Status</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"9\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.entry_price !== undefined ? order.entry_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.current_price !== undefined ? order.current_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl !== undefined ? order.pnl.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage !== undefined ? order.pnl_percentage.toFixed(2) : \"N/A\"}%\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold ${\n//                                                     order.pnl >= 0 ? \"text-green-400\" : \"text-red-400\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl >= 0 ? \"Profit\" : \"Loss\"}\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                             {/* Footer Row for Totals */}\n//                             <tfoot className=\"bg-gray-200 text-black font-bold\">\n//                                 <tr className=\"border-t border-gray-200 bg-gray-200\">\n//                                     <td className=\"px-12 py- text-right\" colSpan=\"4\">Total:</td>\n//                                     {/* <td className=\"px-4 py-3\">{totalQuantity}</td> */}\n//                                     <td className=\"px-4 py-3\">{totalEntryPrice.toFixed(2)}</td>\n//                                     <td className=\"px-4 py-3\">{totalLatestPrice.toFixed(2)}</td>\n//                                     <td className={`px-4 py-3 ${netPnl >= 0 ? \"text-green-400\" : \"text-red-400\"}`}>\n//                                         {netPnl.toFixed(2)}\n//                                     </td>\n//                                     <td className=\"px-4 py-3\">{totalEntryPrice.toFixed(2)}</td>\n//                                     <td className=\"px-4 py-3\">loss</td>\n//                                 </tr>\n//                             </tfoot>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     useEffect(() => {\n//         const socket = io(\"http://127.0.0.1:5000\", {\n//             reconnectionAttempts: 5, // Try reconnecting 5 times\n//             reconnectionDelay: 2000, // Wait 2 seconds before retry\n//         });\n\n//         // Fetch initial PnL data\n//         const fetchInitialData = async () => {\n//             try {\n//                 const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//                 const data = await response.json();\n//                 if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                     setPnlData(data.orders); // Set initial API data\n//                 } else {\n//                     setError(\"Invalid API response structure.\");\n//                 }\n//             } catch (err) {\n//                 setError(\"API request failed.\");\n//             }\n//             setLoading(false);\n//         };\n\n//         fetchInitialData();\n\n//         // Listen for real-time PnL updates from WebSocket\n//         socket.on(\"pnl_update\", (data) => {\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report);\n//             } else {\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         });\n\n//         // Handle WebSocket errors\n//         socket.on(\"connect_error\", (err) => {\n//             console.error(\"Socket connection error:\", err);\n//             setError(\"WebSocket connection failed.\");\n//         });\n\n//         // Cleanup WebSocket connection on unmount\n//         return () => {\n//             socket.disconnect();\n//         };\n//     }, []);\n\n//     // Total PnL Calculations\n//     const totalEntryPrice = pnlData.reduce((sum, order) => sum + (order.entry_price || 0), 0);\n//     const totalLatestPrice = pnlData.reduce((sum, order) => sum + (order.current_price || 0), 0);\n//     const totalProfit = pnlData.filter(order => order.pnl > 0).reduce((sum, order) => sum + (order.pnl || 0), 0);\n//     const totalLoss = pnlData.filter(order => order.pnl < 0).reduce((sum, order) => sum + Math.abs(order.pnl || 0), 0);\n//     const netPnl = totalProfit - totalLoss;\n//     const pnlPercentage = totalEntryPrice > 0 ? ((netPnl / totalEntryPrice) * 100).toFixed(2) : \"0.00\";\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-300 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-6xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                     <th className=\"px-4 py-2\">Status</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"9\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.entry_price !== undefined ? order.entry_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.current_price !== undefined ? order.current_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl !== undefined ? order.pnl.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage !== undefined ? order.pnl_percentage.toFixed(2) : \"N/A\"}%\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold ${\n//                                                     order.pnl >= 0 ? \"text-green-400\" : \"text-red-400\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl >= 0 ? \"Profit\" : \"Loss\"}\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                             {/* Footer Row for Totals */}\n//                             <tfoot className=\"bg-gray-200 text-black font-bold\">\n//                                 <tr className=\"border-t border-gray-200 bg-gray-200\">\n//                                     <td className=\"px-12 py- text-right\" colSpan=\"4\">Total:</td>\n//                                     <td className=\"px-4 py-3\">{totalEntryPrice.toFixed(2)}</td>\n//                                     <td className=\"px-4 py-3\">{totalLatestPrice.toFixed(2)}</td>\n//                                     <td className={`px-4 py-3 ${netPnl >= 0 ? \"text-green-400\" : \"text-red-400\"}`}>\n//                                         {netPnl.toFixed(2)}\n//                                     </td>\n//                                     <td className=\"px-4 py-3\">{pnlPercentage}%</td>\n//                                     <td className=\"px-4 py-3\">{netPnl >= 0 ? \"Profit\" : \"Loss\"}</td>\n//                                 </tr>\n//                             </tfoot>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     useEffect(() => {\n//         const socket = io(\"http://127.0.0.1:5000\", {\n//             reconnectionAttempts: 5,\n//             reconnectionDelay: 2000,\n//         });\n\n//         const fetchInitialData = async () => {\n//             try {\n//                 const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//                 const data = await response.json();\n//                 if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                     setPnlData(data.orders);\n//                 } else {\n//                     setError(\"Invalid API response structure.\");\n//                 }\n//             } catch (err) {\n//                 setError(\"API request failed.\");\n//             }\n//             setLoading(false);\n//         };\n\n//         fetchInitialData();\n\n//         socket.on(\"pnl_update\", (data) => {\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report);\n//             } else {\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         });\n\n//         socket.on(\"connect_error\", (err) => {\n//             console.error(\"Socket connection error:\", err);\n//             setError(\"WebSocket connection failed.\");\n//         });\n\n//         return () => {\n//             socket.disconnect();\n//         };\n//     }, []);\n\n//     const totalEntryPrice = pnlData.reduce((sum, order) => sum + (order.entry_price || 0), 0);\n//     const totalLatestPrice = pnlData.reduce((sum, order) => sum + (order.current_price || 0), 0);\n//     const totalProfit = pnlData.filter(order => order.pnl > 0).reduce((sum, order) => sum + (order.pnl || 0), 0);\n//     const totalLoss = pnlData.filter(order => order.pnl < 0).reduce((sum, order) => sum + Math.abs(order.pnl || 0), 0);\n//     const netPnl = totalProfit - totalLoss;\n//     const pnlPercentage = totalEntryPrice > 0 ? ((netPnl / totalEntryPrice) * 100).toFixed(2) : \"0.00\";\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-300 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-6xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                     <th className=\"px-4 py-2\">Status</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"9\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.entry_price !== undefined ? order.entry_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.current_price !== undefined ? order.current_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl !== undefined ? order.pnl.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage !== undefined ? order.pnl_percentage.toFixed(2) : \"N/A\"}%\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold ${\n//                                                     order.pnl >= 0 ? \"text-green-400\" : \"text-red-400\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl >= 0 ? \"Profit\" : \"Loss\"}\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                             <tfoot className=\"bg-gray-200 text-black font-bold\">\n//                                 <tr className=\"border-t border-gray-200 bg-gray-200\">\n//                                     <td className=\"px-12 py-3 text-right\" colSpan=\"4\">Total:</td>\n//                                     <td className=\"px-4 py-3\">{totalEntryPrice.toFixed(2)}</td>\n//                                     <td className=\"px-4 py-3\">{totalLatestPrice.toFixed(2)}</td>\n//                                     <td className={`px-4 py-3 ${netPnl >= 0 ? \"text-green-400\" : \"text-red-400\"}`}>{netPnl.toFixed(2)}</td>\n//                                     <td className=\"px-4 py-3\">{pnlPercentage}%</td>\n//                                     <td className=\"px-4 py-3\">{netPnl >= 0 ? \"Profit\" : \"Loss\"}</td>\n//                                 </tr>\n//                             </tfoot>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\nvar _c;\n$RefreshReg$(_c, \"PnlReport\");","map":{"version":3,"names":["React","useEffect","useState","io","jsxDEV","_jsxDEV","socket","transports","reconnectionAttempts","reconnectionDelay","PnlReport","_s","pnlData","setPnlData","livePrices","setLivePrices","loading","setLoading","error","setError","fetchInitialData","response","fetch","ok","Error","status","data","json","console","log","orders","live_prices","err","handlePnLUpdate","pnl_report","on","message","off","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","colSpan","map","order","_order$pnl","_order$pnl_percentage","currentPrice","security_id","order_id","transaction_type","quantity","price","pnl","toFixed","pnl_percentage","_c","$RefreshReg$"],"sources":["/home/hp/Documents/Dhan_Trading_Bot/dhan_frontend/src/components/PnlReport.js"],"sourcesContent":["\n\nimport React, { useEffect, useState } from \"react\";\nimport { io } from \"socket.io-client\";\n\nconst socket = io(\"http://127.0.0.1:5000\", {\n    transports: [\"websocket\"], \n    reconnectionAttempts: 5,   \n    reconnectionDelay: 2000,    \n});\n\nconst PnlReport = () => {\n    const [pnlData, setPnlData] = useState([]);\n    const [livePrices, setLivePrices] = useState({});  // ✅ Store live prices separately\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    const fetchInitialData = async () => {\n        try {\n            const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n            if (!response.ok) {\n                throw new Error(`HTTP error! Status: ${response.status}`);\n            }\n            const data = await response.json();\n            console.log(\"✅ Initial API Data:\", data);\n\n            if (data.status === \"success\") {\n                setPnlData(data.orders || []);\n                setLivePrices(data.live_prices || {});  // ✅ Store live prices separately\n            } else {\n                throw new Error(\"Invalid API response structure.\");\n            }\n        } catch (err) {\n            console.error(\"Error fetching initial data:\", err);\n            setError(\"Failed to fetch initial data.\");\n        }\n        setLoading(false);\n    };\n\n    useEffect(() => {\n        fetchInitialData();\n\n        const handlePnLUpdate = (data) => {\n            console.log(\"🔄 Received WebSocket Update:\", data);\n            if (data.status === \"success\") {\n                setPnlData(data.pnl_report || []);\n                setLivePrices(data.live_prices || {});  // ✅ Update live prices from WebSocket\n            } else {\n                setError(\"Invalid WebSocket data.\");\n            }\n        };\n\n        socket.on(\"pnl_update\", handlePnLUpdate);\n        socket.on(\"connect\", () => console.log(\"✅ WebSocket connected!\"));\n        socket.on(\"disconnect\", () => console.log(\"❌ WebSocket disconnected!\"));\n        socket.on(\"connect_error\", (err) => {\n            console.error(\"WebSocket connection error:\", err.message || err);\n            setError(\"WebSocket connection failed.\");\n        });\n\n        return () => {\n            socket.off(\"pnl_update\", handlePnLUpdate);\n        };\n    }, []);\n\n    return (\n        <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n            <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n            {loading ? (\n                <p className=\"text-gray-300\">Fetching data...</p>\n            ) : error ? (\n                <p className=\"text-red-500 font-semibold\">{error}</p>\n            ) : (\n                <div className=\"w-full max-w-5xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n                    <div className=\"overflow-x-auto\">\n                        <table className=\"w-full text-sm text-gray-300\">\n                            <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n                                <tr>\n                                    <th className=\"px-4 py-2\">Order ID</th>\n                                    <th className=\"px-4 py-2\">Security ID</th>\n                                    <th className=\"px-4 py-2\">Type</th>\n                                    <th className=\"px-4 py-2\">Quantity</th>\n                                    <th className=\"px-4 py-2\">Entry Price</th>\n                                    <th className=\"px-4 py-2\">Latest Price</th> {/* ✅ Fixed column */}\n                                    <th className=\"px-4 py-2\">PnL</th>\n                                    <th className=\"px-4 py-2\">PnL %</th>\n                                </tr>\n                            </thead>\n                            <tbody className=\"divide-y divide-gray-700\">\n                                {pnlData.length === 0 ? (\n                                    <tr>\n                                        <td colSpan=\"8\" className=\"p-4 text-center text-gray-500\">\n                                            No orders available.\n                                        </td>\n                                    </tr>\n                                ) : (\n                                    pnlData.map((order) => {\n                                        const currentPrice = livePrices[order.security_id] || \"N/A\"; // ✅ Fetch correct live price\n                                        return (\n                                            <tr key={order.order_id} className=\"hover:bg-gray-700\">\n                                                <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n                                                <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n                                                <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n                                                <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n                                                <td className=\"px-4 py-2\">{order.price || \"N/A\"}</td>\n                                                <td className=\"px-4 py-2 font-semibold\">{currentPrice}</td> {/* ✅ Display Correct Live Price */}\n                                                <td\n                                                    className={`px-4 py-2 font-bold text-lg ${\n                                                        order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n                                                    }`}\n                                                >\n                                                    {order.pnl?.toFixed(2) || \"N/A\"}\n                                                </td>\n                                                <td className=\"px-4 py-2 font-semibold\">\n                                                    {order.pnl_percentage?.toFixed(2) || \"N/A\"}%\n                                                </td>\n                                            </tr>\n                                        );\n                                    })\n                                )}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default PnlReport;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n\n// // ✅ Fix: Force WebSocket transport\n// const socket = io(\"http://127.0.0.1:5000\", {\n//     transports: [\"websocket\"],  // ✅ Use WebSockets only\n//     reconnectionAttempts: 5,    // Retry up to 5 times\n//     reconnectionDelay: 2000,    // Wait 2 seconds between attempts\n// });\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // Fetch initial data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//             console.log(\"📡 Fetching initial data...\");  // ✅ Logging API call\n//             if (!response.ok) {\n//                 throw new Error(`HTTP error! Status: ${response.status}`);\n//             }\n//             const data = await response.json();\n//             console.log(\"✅ Initial API Data:\", data);  // ✅ Print API response in console\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders); // Initial data from API\n//             } else {\n//                 throw new Error(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             console.error(\"Error fetching initial data:\", err);\n//             setError(\"Failed to fetch initial data. Check the console for details.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData(); // Fetch initial orders from Flask\n\n//         // WebSocket event listeners\n//         const handlePnLUpdate = (data) => {\n//             console.log(\"🔄 Received WebSocket Update:\", data);  // ✅ Print WebSocket data\n//             console.log(\"Received PnL update:\", data);\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report); // Update live data\n//             } else {\n//                 console.error(\"Invalid WebSocket data:\", data);\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         };\n\n//         const handleConnect = () => console.log(\"✅ WebSocket connected!\");\n//         const handleDisconnect = () => console.log(\"❌ WebSocket disconnected!\");\n//         const handleError = (err) => {\n//             console.error(\"WebSocket connection error:\", err.message || err);\n//             setError(\"WebSocket connection failed. Check the console for details.\");\n//         };\n\n//         // Register WebSocket listeners\n//         socket.on(\"pnl_update\", handlePnLUpdate);\n//         socket.on(\"connect\", handleConnect);\n//         socket.on(\"disconnect\", handleDisconnect);\n//         socket.on(\"connect_error\", handleError);\n\n//         return () => {\n//             // Cleanup WebSocket listeners\n//             socket.off(\"pnl_update\", handlePnLUpdate);\n//             socket.off(\"connect\", handleConnect);\n//             socket.off(\"disconnect\", handleDisconnect);\n//             socket.off(\"connect_error\", handleError);\n//         };\n//     }, []);\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-500 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-5xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"8\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.price || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.live_prices || \"N/A\"}</td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage?.toFixed(2) || \"N/A\"}%\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// const socket = io(\"http://127.0.0.1:5000\"); // Connect WebSocket to Flask backend\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // Fetch initial data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//             const data = await response.json();\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders); // Initial data from API\n//             } else {\n//                 setError(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             setError(\"API request failed.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData(); // Fetch initial orders from Flask\n\n//         // Listen for live PnL updates from WebSocket\n//         socket.on(\"pnl_update\", (data) => {\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report); // Update live data\n//             } else {\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         });\n\n//         socket.on(\"connect_error\", (err) => {\n//             console.error(\"Socket connection error:\", err);\n//             setError(\"WebSocket connection failed.\");\n//         });\n\n//         return () => {\n//             socket.off(\"pnl_update\");\n//             socket.off(\"connect_error\");\n//         };\n//     }, []);\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-500 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-5xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"8\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.entry_price !== undefined ? order.price : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.current_price !== undefined ? order.current_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl !== undefined ? order.pnl.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage !== undefined ? order.pnl_percentage.toFixed(2) : \"N/A\"}%\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n\n\n\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n\n// // ✅ Fix: Force WebSocket transport\n// const socket = io(\"http://127.0.0.1:5000\", {\n//     transports: [\"websocket\"],  // ✅ Use WebSockets only\n//     reconnectionAttempts: 5,    // Retry up to 5 times\n//     reconnectionDelay: 2000,    // Wait 2 seconds between attempts\n// });\n\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // Fetch initial data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//             if (!response.ok) {\n//                 throw new Error(`HTTP error! Status: ${response.status}`);\n//             }\n//             const data = await response.json();\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders); // Initial data from API\n//             } else {\n//                 throw new Error(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             console.error(\"Error fetching initial data:\", err);\n//             setError(\"Failed to fetch initial data. Check the console for details.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData(); // Fetch initial orders from Flask\n\n//         // WebSocket event listeners\n//         const handlePnLUpdate = (data) => {\n//             console.log(\"Received PnL update:\", data);\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report); // Update live data\n//             } else {\n//                 console.error(\"Invalid WebSocket data:\", data);\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         };\n\n//         const handleConnect = () => console.log(\"✅ WebSocket connected!\");\n//         const handleDisconnect = () => console.log(\"❌ WebSocket disconnected!\");\n//         const handleError = (err) => {\n//             console.error(\"WebSocket connection error:\", err.message || err);\n//             setError(\"WebSocket connection failed. Check the console for details.\");\n//         };\n\n//         // Register WebSocket listeners\n//         socket.on(\"pnl_update\", handlePnLUpdate);\n//         socket.on(\"connect\", handleConnect);\n//         socket.on(\"disconnect\", handleDisconnect);\n//         socket.on(\"connect_error\", handleError);\n\n//         return () => {\n//             // Cleanup WebSocket listeners\n//             socket.off(\"pnl_update\", handlePnLUpdate);\n//             socket.off(\"connect\", handleConnect);\n//             socket.off(\"disconnect\", handleDisconnect);\n//             socket.off(\"connect_error\", handleError);\n//         };\n//     }, []);\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-500 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-5xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"8\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.price || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.current_price || \"N/A\"}</td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage?.toFixed(2) || \"N/A\"}%\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n\n\n\n\n\n\n\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// // ✅ WebSocket Setup\n// const socket = io(\"http://127.0.0.1:5000\", {\n//     transports: [\"websocket\"],  // ✅ Use WebSockets only\n//     reconnectionAttempts: 5,    // Retry up to 5 times\n//     reconnectionDelay: 2000,    // Wait 2 seconds between attempts\n// });\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [totalPnl, setTotalPnl] = useState(0);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // ✅ Fetch Initial Data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(\"http://127.0.0.1:5000/pnl-report\");\n//             if (!response.ok) {\n//                 throw new Error(`HTTP error! Status: ${response.status}`);\n//             }\n//             const data = await response.json();\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders); // Set initial orders data\n//             } else {\n//                 throw new Error(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             console.error(\"Error fetching initial data:\", err);\n//             setError(\"Failed to fetch initial data. Check the console.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData(); // Fetch initial orders from Flask API\n\n//         // ✅ WebSocket Event Listeners\n//         const handlePnLUpdate = (data) => {\n//             console.log(\"📊 Received PnL update:\", data);\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report); // Update PnL data\n//                 setTotalPnl(data.total_pnl); // Update Total PnL\n//             } else {\n//                 console.error(\"Invalid WebSocket data:\", data);\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         };\n\n//         const handleConnect = () => console.log(\"✅ WebSocket connected!\");\n//         const handleDisconnect = () => console.log(\"❌ WebSocket disconnected!\");\n//         const handleError = (err) => {\n//             console.error(\"WebSocket error:\", err.message || err);\n//             setError(\"WebSocket connection failed. Check the console.\");\n//         };\n\n//         // Register WebSocket Listeners\n//         socket.on(\"pnl_update\", handlePnLUpdate);\n//         socket.on(\"connect\", handleConnect);\n//         socket.on(\"disconnect\", handleDisconnect);\n//         socket.on(\"connect_error\", handleError);\n\n//         return () => {\n//             // Cleanup WebSocket Listeners\n//             socket.off(\"pnl_update\", handlePnLUpdate);\n//             socket.off(\"connect\", handleConnect);\n//             socket.off(\"disconnect\", handleDisconnect);\n//             socket.off(\"connect_error\", handleError);\n//         };\n//     }, []);\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n\n//             {/* ✅ Show Errors & Loading State */}\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-500 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-5xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"8\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.entry_price?.toFixed(2) || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.current_price?.toFixed(2) || \"N/A\"}</td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage?.toFixed(2) || \"N/A\"}%\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n\n//             {/* ✅ Total PnL Summary */}\n//             {!loading && !error && (\n//                 <div className=\"mt-4 p-4 bg-gray-800 rounded-lg shadow-md w-full max-w-5xl\">\n//                     <h3 className=\"text-xl font-bold\">\n//                         Total PnL:{\" \"}\n//                         <span className={totalPnl >= 0 ? \"text-green-400\" : \"text-red-400\"}>\n//                             {totalPnl.toFixed(2)} INR\n//                         </span>\n//                     </h3>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n\n\n\n\n\n\n\n\n\n\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// const API_URL = \"http://127.0.0.1:5000\";\n// const socket = io(API_URL, {\n//     transports: [\"websocket\"],\n//     reconnectionAttempts: 5,\n//     reconnectionDelay: 2000,\n// });\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [totalPnl, setTotalPnl] = useState(0);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // Fetch Initial PnL Data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(`${API_URL}/pnl-report`);\n//             if (!response.ok) {\n//                 throw new Error(`HTTP error! Status: ${response.status}`);\n//             }\n//             const data = await response.json();\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders);\n//                 setTotalPnl(data.total_pnl || 0);\n//             } else {\n//                 throw new Error(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             console.error(\"Error fetching initial data:\", err);\n//             setError(\"Failed to fetch initial data. Check the console.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData();\n\n//         socket.on(\"pnl_update\", (data) => {\n//             console.log(\"📊 Received PnL update:\", data);\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report);\n//                 setTotalPnl(data.total_pnl);\n//             } else {\n//                 console.error(\"Invalid WebSocket data:\", data);\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         });\n\n//         socket.on(\"connect\", () => console.log(\"✅ WebSocket connected!\"));\n//         socket.on(\"disconnect\", () => console.log(\"❌ WebSocket disconnected!\"));\n//         socket.on(\"connect_error\", (err) => {\n//             console.error(\"WebSocket error:\", err.message || err);\n//             setError(\"WebSocket connection failed. Check the console.\");\n//         });\n\n//         return () => {\n//             socket.off(\"pnl_update\");\n//             socket.off(\"connect\");\n//             socket.off(\"disconnect\");\n//             socket.off(\"connect_error\");\n//         };\n//     }, []);\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-500 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-5xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"8\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.price || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.current_price?.toFixed(2) || \"N/A\"}</td>\n//                                             <td className={`px-4 py-2 font-bold text-lg ${order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"}`}>\n//                                                 {order.pnl?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage?.toFixed(2) || \"N/A\"}%\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n\n//             {!loading && !error && (\n//                 <div className=\"mt-4 p-4 bg-gray-800 rounded-lg shadow-md w-full max-w-5xl\">\n//                     <h3 className=\"text-xl font-bold\">\n//                         Total PnL: <span className={totalPnl >= 0 ? \"text-green-400\" : \"text-red-400\"}>{totalPnl.toFixed(2)} INR</span>\n//                     </h3>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// const socket = io(\"http://127.0.0.1:5000\"); // Connect WebSocket to Flask backend\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // Fetch initial data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//             if (!response.ok) {\n//                 throw new Error(`HTTP error! Status: ${response.status}`);\n//             }\n//             const data = await response.json();\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders); // Initial data from API\n//             } else {\n//                 throw new Error(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             console.error(\"Error fetching initial data:\", err);\n//             setError(\"Failed to fetch initial data. Check the console for details.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData(); // Fetch initial orders from Flask\n\n//         // Listen for live PnL updates from WebSocket\n//         socket.on(\"pnl_update\", (data) => {\n//             console.log(\"Received PnL update:\", data);\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report); // Update live data\n//             } else {\n//                 console.error(\"Invalid WebSocket data:\", data);\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         });\n\n//         socket.on(\"connect\", () => {\n//             console.log(\"WebSocket connected!\");\n//         });\n\n//         socket.on(\"disconnect\", () => {\n//             console.log(\"WebSocket disconnected!\");\n//         });\n\n//         socket.on(\"connect_error\", (err) => {\n//             console.error(\"Socket connection error:\", err.message || err);\n//             setError(\"WebSocket connection failed. Check the console for details.\");\n//         });\n\n//         return () => {\n//             socket.off(\"pnl_update\");\n//             socket.off(\"connect_error\");\n//         };\n//     }, []);\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-500 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-5xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"8\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.price || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.last_price || \"N/A\"}</td>\n\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.entry_price?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.current_price?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage?.toFixed(2) || \"N/A\"}%\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n\n\n\n\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// const socket = io(process.env.REACT_APP_SOCKET_URL || \"http://127.0.0.1:5000\"); // Connect WebSocket to Flask backend\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // Fetch initial data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//             if (!response.ok) {\n//                 throw new Error(`HTTP error! Status: ${response.status}`);\n//             }\n//             const data = await response.json();\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders); // Initial data from API\n//             } else {\n//                 throw new Error(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             console.error(\"Error fetching initial data:\", err);\n//             setError(\"Failed to fetch initial data. Check the console for details.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData(); // Fetch initial orders from Flask\n\n//         // Listen for live PnL updates from WebSocket\n//         socket.on(\"pnl_update\", (data) => {\n//             console.log(\"Received PnL update:\", data);\n//             if (data?.status === \"success\" && Array.isArray(data?.pnl_report)) {\n//                 setPnlData(data.pnl_report); // Update live data\n//             } else {\n//                 console.error(\"Invalid WebSocket data:\", data);\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         });\n\n//         socket.on(\"connect\", () => {\n//             console.log(\"WebSocket connected!\");\n//         });\n\n//         socket.on(\"disconnect\", () => {\n//             console.log(\"WebSocket disconnected!\");\n//         });\n\n//         socket.on(\"reconnect\", (attempt) => {\n//             console.log(`WebSocket reconnected after ${attempt} attempts`);\n//         });\n\n//         socket.on(\"connect_error\", (err) => {\n//             console.error(\"Socket connection error:\", err.message || err);\n//             setError(\"WebSocket connection failed. Check the console for details.\");\n//         });\n\n//         socket.on(\"reconnect_failed\", () => {\n//             console.error(\"WebSocket reconnection failed\");\n//             setError(\"WebSocket reconnection failed. Please refresh the page.\");\n//         });\n\n//         return () => {\n//             socket.off(\"pnl_update\");\n//             socket.off(\"connect_error\");\n//             socket.off(\"connect\");\n//             socket.off(\"disconnect\");\n//             socket.off(\"reconnect\");\n//             socket.off(\"reconnect_failed\");\n//         };\n//     }, []);\n\n//     const totalEntryPrice = pnlData.reduce((sum, order) => sum + (order.entry_price || 0), 0);\n//     const totalLatestPrice = pnlData.reduce((sum, order) => sum + (order.current_price || 0), 0);\n//     const totalProfit = pnlData.filter(order => order.pnl > 0).reduce((sum, order) => sum + (order.pnl || 0), 0);\n//     const totalLoss = pnlData.filter(order => order.pnl < 0).reduce((sum, order) => sum + Math.abs(order.pnl || 0), 0);\n//     const netPnl = totalProfit - totalLoss;\n//     const pnlPercentage = totalEntryPrice > 0 ? ((netPnl / totalEntryPrice) * 100).toFixed(2) : \"0.00\";\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <div className=\"flex justify-center items-center\">\n//                     <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-white\"></div>\n//                 </div>\n//             ) : error ? (\n//                 <div>\n//                     <p className=\"text-red-500 font-semibold\">{error}</p>\n//                     <button\n//                         onClick={fetchInitialData}\n//                         className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n//                     >\n//                         Retry\n//                     </button>\n//                 </div>\n//             ) : (\n//                 <div className=\"w-full max-w-5xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"8\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.entry_price?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.current_price?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl?.toFixed(2) || \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage?.toFixed(2) || \"N/A\"}%\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                             <tfoot className=\"bg-gray-700 text-white font-bold\">\n//                                 <tr className=\"border-t border-gray-600\">\n//                                     <td className=\"px-12 py-3 text-right\" colSpan=\"4\">Total:</td>\n//                                     <td className=\"px-4 py-3\">{totalEntryPrice.toFixed(2)}</td>\n//                                     <td className=\"px-4 py-3\">{totalLatestPrice.toFixed(2)}</td>\n//                                     <td className={`px-4 py-3 ${netPnl >= 0 ? \"text-green-400\" : \"text-red-400\"}`}>{netPnl.toFixed(2)}</td>\n//                                     <td className=\"px-4 py-3\">{pnlPercentage}%</td>\n//                                     <td className=\"px-4 py-3\">{netPnl >= 0 ? \"Profit\" : \"Loss\"}</td>\n//                                 </tr>\n//                             </tfoot>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// const socket = io(\"http://127.0.0.1:5000\"); // Connect WebSocket to Flask backend\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // Fetch initial data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//             const data = await response.json();\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders); // Set API data\n//             } else {\n//                 setError(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             setError(\"API request failed.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData();\n\n//         // Listen for live PnL updates from WebSocket\n//         socket.on(\"pnl_update\", (data) => {\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report);\n//             } else {\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         });\n\n//         socket.on(\"connect_error\", (err) => {\n//             console.error(\"Socket connection error:\", err);\n//             setError(\"WebSocket connection failed.\");\n//         });\n\n//         return () => {\n//             socket.off(\"pnl_update\");\n//             socket.off(\"connect_error\");\n//         };\n//     }, []);\n\n//     // Calculate total profit, total loss, and net PnL\n//     const totalProfit = pnlData\n//         .filter(order => order.pnl > 0)\n//         .reduce((sum, order) => sum + (order.pnl || 0), 0)\n//         .toFixed(2);\n\n//     const totalLoss = pnlData\n//         .filter(order => order.pnl < 0)\n//         .reduce((sum, order) => sum + Math.abs(order.pnl || 0), 0)\n//         .toFixed(2);\n\n//     const netPnl = (totalProfit - totalLoss).toFixed(2);\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-500 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-6xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                     <th className=\"px-4 py-2\">Status</th> {/* New Column */}\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"9\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.entry_price !== undefined ? order.entry_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.current_price !== undefined ? order.current_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl !== undefined ? order.pnl.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage !== undefined ? order.pnl_percentage.toFixed(2) : \"N/A\"}%\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold ${\n//                                                     order.pnl >= 0 ? \"text-green-400\" : \"text-red-400\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl >= 0 ? \"Profit\" : \"Loss\"}\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                             {/* Footer Row for Total Profit & Loss */}\n//                             <tfoot className=\"bg-gray-900 text-white text-lg font-bold\">\n//                                 <tr>\n//                                     <td colSpan=\"6\" className=\"px-4 py-3 text-right\">Total Profit:</td>\n//                                     <td className=\"px-4 py-3 text-green-500\">{totalProfit}</td>\n//                                     <td className=\"px-4 py-3\"></td>\n//                                     <td className=\"px-4 py-3\"></td>\n//                                 </tr>\n//                                 <tr>\n//                                     <td colSpan=\"6\" className=\"px-4 py-3 text-right\">Total Loss:</td>\n//                                     <td className=\"px-4 py-3 text-red-500\">-{totalLoss}</td>\n//                                     <td className=\"px-4 py-3\"></td>\n//                                     <td className=\"px-4 py-3\"></td>\n//                                 </tr>\n//                                 <tr>\n//                                     <td colSpan=\"6\" className=\"px-4 py-3 text-right\">Net PnL:</td>\n//                                     <td\n//                                         className={`px-4 py-3 font-bold ${\n//                                             netPnl >= 0 ? \"text-green-400\" : \"text-red-400\"\n//                                         }`}\n//                                     >\n//                                         {netPnl}\n//                                     </td>\n//                                     <td className=\"px-4 py-3\"></td>\n//                                     <td className=\"px-4 py-3\"></td>\n//                                 </tr>\n//                             </tfoot>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n\n\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// const socket = io(\"http://127.0.0.1:5000\"); // Connect WebSocket to Flask backend\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     // Fetch initial data from Flask API\n//     const fetchInitialData = async () => {\n//         try {\n//             const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//             const data = await response.json();\n//             if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                 setPnlData(data.orders); // Set API data\n//             } else {\n//                 setError(\"Invalid API response structure.\");\n//             }\n//         } catch (err) {\n//             setError(\"API request failed.\");\n//         }\n//         setLoading(false);\n//     };\n\n//     useEffect(() => {\n//         fetchInitialData();\n\n//         // Listen for live PnL updates from WebSocket\n//         socket.on(\"pnl_update\", (data) => {\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report);\n//             } else {\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         });\n\n//         socket.on(\"connect_error\", (err) => {\n//             console.error(\"Socket connection error:\", err);\n//             setError(\"WebSocket connection failed.\");\n//         });\n\n//         return () => {\n//             socket.off(\"pnl_update\");\n//             socket.off(\"connect_error\");\n//         };\n//     }, []);\n\n//     // Calculate totals for table columns\n//     // const totalQuantity = pnlData.reduce((sum, order) => sum + (order.quantity || 0), 0);\n//     const totalEntryPrice = pnlData.reduce((sum, order) => sum + (order.entry_price || 0), 0);\n//     const totalLatestPrice = pnlData.reduce((sum, order) => sum + (order.current_price || 0), 0);\n//     const totalProfit = pnlData.filter(order => order.pnl > 0).reduce((sum, order) => sum + (order.pnl || 0), 0);\n//     const totalLoss = pnlData.filter(order => order.pnl < 0).reduce((sum, order) => sum + Math.abs(order.pnl || 0), 0);\n//     const netPnl = totalProfit - totalLoss;\n    \n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-300 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-6xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                     <th className=\"px-4 py-2\">Status</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"9\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.entry_price !== undefined ? order.entry_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.current_price !== undefined ? order.current_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl !== undefined ? order.pnl.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage !== undefined ? order.pnl_percentage.toFixed(2) : \"N/A\"}%\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold ${\n//                                                     order.pnl >= 0 ? \"text-green-400\" : \"text-red-400\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl >= 0 ? \"Profit\" : \"Loss\"}\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                             {/* Footer Row for Totals */}\n//                             <tfoot className=\"bg-gray-200 text-black font-bold\">\n//                                 <tr className=\"border-t border-gray-200 bg-gray-200\">\n//                                     <td className=\"px-12 py- text-right\" colSpan=\"4\">Total:</td>\n//                                     {/* <td className=\"px-4 py-3\">{totalQuantity}</td> */}\n//                                     <td className=\"px-4 py-3\">{totalEntryPrice.toFixed(2)}</td>\n//                                     <td className=\"px-4 py-3\">{totalLatestPrice.toFixed(2)}</td>\n//                                     <td className={`px-4 py-3 ${netPnl >= 0 ? \"text-green-400\" : \"text-red-400\"}`}>\n//                                         {netPnl.toFixed(2)}\n//                                     </td>\n//                                     <td className=\"px-4 py-3\">{totalEntryPrice.toFixed(2)}</td>\n//                                     <td className=\"px-4 py-3\">loss</td>\n//                                 </tr>\n//                             </tfoot>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n\n\n\n\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     useEffect(() => {\n//         const socket = io(\"http://127.0.0.1:5000\", {\n//             reconnectionAttempts: 5, // Try reconnecting 5 times\n//             reconnectionDelay: 2000, // Wait 2 seconds before retry\n//         });\n\n//         // Fetch initial PnL data\n//         const fetchInitialData = async () => {\n//             try {\n//                 const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//                 const data = await response.json();\n//                 if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                     setPnlData(data.orders); // Set initial API data\n//                 } else {\n//                     setError(\"Invalid API response structure.\");\n//                 }\n//             } catch (err) {\n//                 setError(\"API request failed.\");\n//             }\n//             setLoading(false);\n//         };\n\n//         fetchInitialData();\n\n//         // Listen for real-time PnL updates from WebSocket\n//         socket.on(\"pnl_update\", (data) => {\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report);\n//             } else {\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         });\n\n//         // Handle WebSocket errors\n//         socket.on(\"connect_error\", (err) => {\n//             console.error(\"Socket connection error:\", err);\n//             setError(\"WebSocket connection failed.\");\n//         });\n\n//         // Cleanup WebSocket connection on unmount\n//         return () => {\n//             socket.disconnect();\n//         };\n//     }, []);\n\n//     // Total PnL Calculations\n//     const totalEntryPrice = pnlData.reduce((sum, order) => sum + (order.entry_price || 0), 0);\n//     const totalLatestPrice = pnlData.reduce((sum, order) => sum + (order.current_price || 0), 0);\n//     const totalProfit = pnlData.filter(order => order.pnl > 0).reduce((sum, order) => sum + (order.pnl || 0), 0);\n//     const totalLoss = pnlData.filter(order => order.pnl < 0).reduce((sum, order) => sum + Math.abs(order.pnl || 0), 0);\n//     const netPnl = totalProfit - totalLoss;\n//     const pnlPercentage = totalEntryPrice > 0 ? ((netPnl / totalEntryPrice) * 100).toFixed(2) : \"0.00\";\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-300 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-6xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                     <th className=\"px-4 py-2\">Status</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"9\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.entry_price !== undefined ? order.entry_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.current_price !== undefined ? order.current_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl !== undefined ? order.pnl.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage !== undefined ? order.pnl_percentage.toFixed(2) : \"N/A\"}%\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold ${\n//                                                     order.pnl >= 0 ? \"text-green-400\" : \"text-red-400\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl >= 0 ? \"Profit\" : \"Loss\"}\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                             {/* Footer Row for Totals */}\n//                             <tfoot className=\"bg-gray-200 text-black font-bold\">\n//                                 <tr className=\"border-t border-gray-200 bg-gray-200\">\n//                                     <td className=\"px-12 py- text-right\" colSpan=\"4\">Total:</td>\n//                                     <td className=\"px-4 py-3\">{totalEntryPrice.toFixed(2)}</td>\n//                                     <td className=\"px-4 py-3\">{totalLatestPrice.toFixed(2)}</td>\n//                                     <td className={`px-4 py-3 ${netPnl >= 0 ? \"text-green-400\" : \"text-red-400\"}`}>\n//                                         {netPnl.toFixed(2)}\n//                                     </td>\n//                                     <td className=\"px-4 py-3\">{pnlPercentage}%</td>\n//                                     <td className=\"px-4 py-3\">{netPnl >= 0 ? \"Profit\" : \"Loss\"}</td>\n//                                 </tr>\n//                             </tfoot>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n\n\n\n\n\n\n// import React, { useEffect, useState } from \"react\";\n// import { io } from \"socket.io-client\";\n\n// const PnlReport = () => {\n//     const [pnlData, setPnlData] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [error, setError] = useState(null);\n\n//     useEffect(() => {\n//         const socket = io(\"http://127.0.0.1:5000\", {\n//             reconnectionAttempts: 5,\n//             reconnectionDelay: 2000,\n//         });\n\n//         const fetchInitialData = async () => {\n//             try {\n//                 const response = await fetch(\"http://127.0.0.1:5000/api/pnl-report\");\n//                 const data = await response.json();\n//                 if (data.status === \"success\" && Array.isArray(data.orders)) {\n//                     setPnlData(data.orders);\n//                 } else {\n//                     setError(\"Invalid API response structure.\");\n//                 }\n//             } catch (err) {\n//                 setError(\"API request failed.\");\n//             }\n//             setLoading(false);\n//         };\n\n//         fetchInitialData();\n\n//         socket.on(\"pnl_update\", (data) => {\n//             if (data.status === \"success\" && Array.isArray(data.pnl_report)) {\n//                 setPnlData(data.pnl_report);\n//             } else {\n//                 setError(\"Invalid WebSocket data.\");\n//             }\n//         });\n\n//         socket.on(\"connect_error\", (err) => {\n//             console.error(\"Socket connection error:\", err);\n//             setError(\"WebSocket connection failed.\");\n//         });\n\n//         return () => {\n//             socket.disconnect();\n//         };\n//     }, []);\n\n//     const totalEntryPrice = pnlData.reduce((sum, order) => sum + (order.entry_price || 0), 0);\n//     const totalLatestPrice = pnlData.reduce((sum, order) => sum + (order.current_price || 0), 0);\n//     const totalProfit = pnlData.filter(order => order.pnl > 0).reduce((sum, order) => sum + (order.pnl || 0), 0);\n//     const totalLoss = pnlData.filter(order => order.pnl < 0).reduce((sum, order) => sum + Math.abs(order.pnl || 0), 0);\n//     const netPnl = totalProfit - totalLoss;\n//     const pnlPercentage = totalEntryPrice > 0 ? ((netPnl / totalEntryPrice) * 100).toFixed(2) : \"0.00\";\n\n//     return (\n//         <div className=\"p-6 bg-gray-900 min-h-screen flex flex-col items-center text-white\">\n//             <h2 className=\"text-2xl font-bold mb-4\">📊 Live PnL Report</h2>\n//             {loading ? (\n//                 <p className=\"text-gray-300\">Fetching data...</p>\n//             ) : error ? (\n//                 <p className=\"text-red-300 font-semibold\">{error}</p>\n//             ) : (\n//                 <div className=\"w-full max-w-6xl bg-gray-800 shadow-md rounded-lg overflow-hidden\">\n//                     <div className=\"overflow-x-auto\">\n//                         <table className=\"w-full text-sm text-gray-300\">\n//                             <thead className=\"bg-blue-600 text-white uppercase text-xs\">\n//                                 <tr>\n//                                     <th className=\"px-4 py-2\">Order ID</th>\n//                                     <th className=\"px-4 py-2\">Security ID</th>\n//                                     <th className=\"px-4 py-2\">Type</th>\n//                                     <th className=\"px-4 py-2\">Quantity</th>\n//                                     <th className=\"px-4 py-2\">Entry Price</th>\n//                                     <th className=\"px-4 py-2\">Latest Price</th>\n//                                     <th className=\"px-4 py-2\">PnL</th>\n//                                     <th className=\"px-4 py-2\">PnL %</th>\n//                                     <th className=\"px-4 py-2\">Status</th>\n//                                 </tr>\n//                             </thead>\n//                             <tbody className=\"divide-y divide-gray-700\">\n//                                 {pnlData.length === 0 ? (\n//                                     <tr>\n//                                         <td colSpan=\"9\" className=\"p-4 text-center text-gray-500\">\n//                                             No orders available.\n//                                         </td>\n//                                     </tr>\n//                                 ) : (\n//                                     pnlData.map((order) => (\n//                                         <tr key={order.order_id} className=\"hover:bg-gray-700\">\n//                                             <td className=\"px-4 py-2\">{order.order_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.security_id || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.transaction_type || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2\">{order.quantity || \"N/A\"}</td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.entry_price !== undefined ? order.entry_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.current_price !== undefined ? order.current_price.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold text-lg ${\n//                                                     order.pnl >= 0 ? \"text-green-500\" : \"text-red-500\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl !== undefined ? order.pnl.toFixed(2) : \"N/A\"}\n//                                             </td>\n//                                             <td className=\"px-4 py-2 font-semibold\">\n//                                                 {order.pnl_percentage !== undefined ? order.pnl_percentage.toFixed(2) : \"N/A\"}%\n//                                             </td>\n//                                             <td\n//                                                 className={`px-4 py-2 font-bold ${\n//                                                     order.pnl >= 0 ? \"text-green-400\" : \"text-red-400\"\n//                                                 }`}\n//                                             >\n//                                                 {order.pnl >= 0 ? \"Profit\" : \"Loss\"}\n//                                             </td>\n//                                         </tr>\n//                                     ))\n//                                 )}\n//                             </tbody>\n//                             <tfoot className=\"bg-gray-200 text-black font-bold\">\n//                                 <tr className=\"border-t border-gray-200 bg-gray-200\">\n//                                     <td className=\"px-12 py-3 text-right\" colSpan=\"4\">Total:</td>\n//                                     <td className=\"px-4 py-3\">{totalEntryPrice.toFixed(2)}</td>\n//                                     <td className=\"px-4 py-3\">{totalLatestPrice.toFixed(2)}</td>\n//                                     <td className={`px-4 py-3 ${netPnl >= 0 ? \"text-green-400\" : \"text-red-400\"}`}>{netPnl.toFixed(2)}</td>\n//                                     <td className=\"px-4 py-3\">{pnlPercentage}%</td>\n//                                     <td className=\"px-4 py-3\">{netPnl >= 0 ? \"Profit\" : \"Loss\"}</td>\n//                                 </tr>\n//                             </tfoot>\n//                         </table>\n//                     </div>\n//                 </div>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default PnlReport;\n"],"mappings":";;AAEA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,EAAE,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtC,MAAMC,MAAM,GAAGH,EAAE,CAAC,uBAAuB,EAAE;EACvCI,UAAU,EAAE,CAAC,WAAW,CAAC;EACzBC,oBAAoB,EAAE,CAAC;EACvBC,iBAAiB,EAAE;AACvB,CAAC,CAAC;AAEF,MAAMC,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpB,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACY,UAAU,EAAEC,aAAa,CAAC,GAAGb,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE;EACnD,MAAM,CAACc,OAAO,EAAEC,UAAU,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACgB,KAAK,EAAEC,QAAQ,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAMkB,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,sCAAsC,CAAC;MACpE,IAAI,CAACD,QAAQ,CAACE,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAAC,uBAAuBH,QAAQ,CAACI,MAAM,EAAE,CAAC;MAC7D;MACA,MAAMC,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;MAClCC,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEH,IAAI,CAAC;MAExC,IAAIA,IAAI,CAACD,MAAM,KAAK,SAAS,EAAE;QAC3BZ,UAAU,CAACa,IAAI,CAACI,MAAM,IAAI,EAAE,CAAC;QAC7Bf,aAAa,CAACW,IAAI,CAACK,WAAW,IAAI,CAAC,CAAC,CAAC,CAAC,CAAE;MAC5C,CAAC,MAAM;QACH,MAAM,IAAIP,KAAK,CAAC,iCAAiC,CAAC;MACtD;IACJ,CAAC,CAAC,OAAOQ,GAAG,EAAE;MACVJ,OAAO,CAACV,KAAK,CAAC,8BAA8B,EAAEc,GAAG,CAAC;MAClDb,QAAQ,CAAC,+BAA+B,CAAC;IAC7C;IACAF,UAAU,CAAC,KAAK,CAAC;EACrB,CAAC;EAEDhB,SAAS,CAAC,MAAM;IACZmB,gBAAgB,CAAC,CAAC;IAElB,MAAMa,eAAe,GAAIP,IAAI,IAAK;MAC9BE,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEH,IAAI,CAAC;MAClD,IAAIA,IAAI,CAACD,MAAM,KAAK,SAAS,EAAE;QAC3BZ,UAAU,CAACa,IAAI,CAACQ,UAAU,IAAI,EAAE,CAAC;QACjCnB,aAAa,CAACW,IAAI,CAACK,WAAW,IAAI,CAAC,CAAC,CAAC,CAAC,CAAE;MAC5C,CAAC,MAAM;QACHZ,QAAQ,CAAC,yBAAyB,CAAC;MACvC;IACJ,CAAC;IAEDb,MAAM,CAAC6B,EAAE,CAAC,YAAY,EAAEF,eAAe,CAAC;IACxC3B,MAAM,CAAC6B,EAAE,CAAC,SAAS,EAAE,MAAMP,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC,CAAC;IACjEvB,MAAM,CAAC6B,EAAE,CAAC,YAAY,EAAE,MAAMP,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC,CAAC;IACvEvB,MAAM,CAAC6B,EAAE,CAAC,eAAe,EAAGH,GAAG,IAAK;MAChCJ,OAAO,CAACV,KAAK,CAAC,6BAA6B,EAAEc,GAAG,CAACI,OAAO,IAAIJ,GAAG,CAAC;MAChEb,QAAQ,CAAC,8BAA8B,CAAC;IAC5C,CAAC,CAAC;IAEF,OAAO,MAAM;MACTb,MAAM,CAAC+B,GAAG,CAAC,YAAY,EAAEJ,eAAe,CAAC;IAC7C,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EAEN,oBACI5B,OAAA;IAAKiC,SAAS,EAAC,oEAAoE;IAAAC,QAAA,gBAC/ElC,OAAA;MAAIiC,SAAS,EAAC,yBAAyB;MAAAC,QAAA,EAAC;IAAkB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAC9D3B,OAAO,gBACJX,OAAA;MAAGiC,SAAS,EAAC,eAAe;MAAAC,QAAA,EAAC;IAAgB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,GACjDzB,KAAK,gBACLb,OAAA;MAAGiC,SAAS,EAAC,4BAA4B;MAAAC,QAAA,EAAErB;IAAK;MAAAsB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,gBAErDtC,OAAA;MAAKiC,SAAS,EAAC,mEAAmE;MAAAC,QAAA,eAC9ElC,OAAA;QAAKiC,SAAS,EAAC,iBAAiB;QAAAC,QAAA,eAC5BlC,OAAA;UAAOiC,SAAS,EAAC,8BAA8B;UAAAC,QAAA,gBAC3ClC,OAAA;YAAOiC,SAAS,EAAC,0CAA0C;YAAAC,QAAA,eACvDlC,OAAA;cAAAkC,QAAA,gBACIlC,OAAA;gBAAIiC,SAAS,EAAC,WAAW;gBAAAC,QAAA,EAAC;cAAQ;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACvCtC,OAAA;gBAAIiC,SAAS,EAAC,WAAW;gBAAAC,QAAA,EAAC;cAAW;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC1CtC,OAAA;gBAAIiC,SAAS,EAAC,WAAW;gBAAAC,QAAA,EAAC;cAAI;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACnCtC,OAAA;gBAAIiC,SAAS,EAAC,WAAW;gBAAAC,QAAA,EAAC;cAAQ;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACvCtC,OAAA;gBAAIiC,SAAS,EAAC,WAAW;gBAAAC,QAAA,EAAC;cAAW;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC1CtC,OAAA;gBAAIiC,SAAS,EAAC,WAAW;gBAAAC,QAAA,EAAC;cAAY;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,KAAC,eAC5CtC,OAAA;gBAAIiC,SAAS,EAAC,WAAW;gBAAAC,QAAA,EAAC;cAAG;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAClCtC,OAAA;gBAAIiC,SAAS,EAAC,WAAW;gBAAAC,QAAA,EAAC;cAAK;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpC;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF,CAAC,eACRtC,OAAA;YAAOiC,SAAS,EAAC,0BAA0B;YAAAC,QAAA,EACtC3B,OAAO,CAACgC,MAAM,KAAK,CAAC,gBACjBvC,OAAA;cAAAkC,QAAA,eACIlC,OAAA;gBAAIwC,OAAO,EAAC,GAAG;gBAACP,SAAS,EAAC,+BAA+B;gBAAAC,QAAA,EAAC;cAE1D;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC,GAEL/B,OAAO,CAACkC,GAAG,CAAEC,KAAK,IAAK;cAAA,IAAAC,UAAA,EAAAC,qBAAA;cACnB,MAAMC,YAAY,GAAGpC,UAAU,CAACiC,KAAK,CAACI,WAAW,CAAC,IAAI,KAAK,CAAC,CAAC;cAC7D,oBACI9C,OAAA;gBAAyBiC,SAAS,EAAC,mBAAmB;gBAAAC,QAAA,gBAClDlC,OAAA;kBAAIiC,SAAS,EAAC,WAAW;kBAAAC,QAAA,EAAEQ,KAAK,CAACK,QAAQ,IAAI;gBAAK;kBAAAZ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eACxDtC,OAAA;kBAAIiC,SAAS,EAAC,WAAW;kBAAAC,QAAA,EAAEQ,KAAK,CAACI,WAAW,IAAI;gBAAK;kBAAAX,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eAC3DtC,OAAA;kBAAIiC,SAAS,EAAC,WAAW;kBAAAC,QAAA,EAAEQ,KAAK,CAACM,gBAAgB,IAAI;gBAAK;kBAAAb,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eAChEtC,OAAA;kBAAIiC,SAAS,EAAC,WAAW;kBAAAC,QAAA,EAAEQ,KAAK,CAACO,QAAQ,IAAI;gBAAK;kBAAAd,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eACxDtC,OAAA;kBAAIiC,SAAS,EAAC,WAAW;kBAAAC,QAAA,EAAEQ,KAAK,CAACQ,KAAK,IAAI;gBAAK;kBAAAf,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eACrDtC,OAAA;kBAAIiC,SAAS,EAAC,yBAAyB;kBAAAC,QAAA,EAAEW;gBAAY;kBAAAV,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,KAAC,eAC5DtC,OAAA;kBACIiC,SAAS,EAAE,+BACPS,KAAK,CAACS,GAAG,IAAI,CAAC,GAAG,gBAAgB,GAAG,cAAc,EACnD;kBAAAjB,QAAA,EAEF,EAAAS,UAAA,GAAAD,KAAK,CAACS,GAAG,cAAAR,UAAA,uBAATA,UAAA,CAAWS,OAAO,CAAC,CAAC,CAAC,KAAI;gBAAK;kBAAAjB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC/B,CAAC,eACLtC,OAAA;kBAAIiC,SAAS,EAAC,yBAAyB;kBAAAC,QAAA,GAClC,EAAAU,qBAAA,GAAAF,KAAK,CAACW,cAAc,cAAAT,qBAAA,uBAApBA,qBAAA,CAAsBQ,OAAO,CAAC,CAAC,CAAC,KAAI,KAAK,EAAC,GAC/C;gBAAA;kBAAAjB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC;cAAA,GAhBAI,KAAK,CAACK,QAAQ;gBAAAZ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAiBnB,CAAC;YAEb,CAAC;UACJ;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACP;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CACR;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd,CAAC;AAAChC,EAAA,CApHID,SAAS;AAAAiD,EAAA,GAATjD,SAAS;AAsHf,eAAeA,SAAS;;AAiBxB;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAeA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAMA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAUA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAaA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AA2BA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAOA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AA2BA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAKA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAOA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAOA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAAA,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}